set test "utf_kernel_trunc"
set ::result_string {utf-16:012345678901234567890123456789012345678Z
utf-16:0123456789012345678901234567890123456789
utf-16:01234567890123456789012345678901234567Î©
utf-16:012345678901234567890123456789012345678
utf-16:0123456789012345678901234567890123456789
utf-16:0123456789012345678901234567890123456â˜º
utf-16:01234567890123456789012345678901234567
utf-16:012345678901234567890123456789012345678
utf-16:0123456789012345678901234567890123456789
utf-16:012345678901234567890123456789012345ðŸ˜ˆ
utf-16:0123456789012345678901234567890123456
utf-16:01234567890123456789012345678901234567
utf-16:012345678901234567890123456789012345678
utf-16:0123456789012345678901234567890123456789
utf-32:012345678901234567890123456789012345678Z
utf-32:0123456789012345678901234567890123456789
utf-32:01234567890123456789012345678901234567Î©
utf-32:012345678901234567890123456789012345678
utf-32:0123456789012345678901234567890123456789
utf-32:0123456789012345678901234567890123456â˜º
utf-32:01234567890123456789012345678901234567
utf-32:012345678901234567890123456789012345678
utf-32:0123456789012345678901234567890123456789
utf-32:012345678901234567890123456789012345ðŸ˜ˆ
utf-32:0123456789012345678901234567890123456
utf-32:01234567890123456789012345678901234567
utf-32:012345678901234567890123456789012345678
utf-32:0123456789012345678901234567890123456789}

# Note that the MAXSTRINGLEN value must match up with the expected
# value in utf_kernel_trunc.stp *and* it must be of minimum size to
# hold the internal systemtap error messages (like "read fault"
# errors). Currently that's around 35 characters. If MAXSTRINGLEN is
# too small, gcc 7+ will report errors.
stap_run3 $test $srcdir/$subdir/$test.stp -g -DMAXSTRINGLEN=41
